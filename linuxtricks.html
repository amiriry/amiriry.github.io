<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Linux Tricks</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="styles/post.css">
  <link rel="stylesheet" href="styles/linuxtricks.css">
  <link rel="icon" href="../img/only-my-face.png">

<div class="header-container">
	<div class="header-container article-header"><h2>Linux Tricks</h2></div>
	<div class="header-container back blogs back-header"><a href="index.html"><i class="fa-solid fa-house"></i></a></div>
</div>
</head>
<body>

<p>
<h4>What can be done very easy in linux?</h4>
<p>
Some stuff that I encounter that everyone should know
<hr>
<hr><hr>

<div class="trick">
	<div class="grid-container">
		<div class="eof-inject">
			<span class="date">25.06.22 - 16:44 - Saturday</span>
			<h4 class="header">Use EOF fo injecting multiple line argument to a command</h4>
			Did you ever had a situation where you needed some long string in your command line, or just an easier way to write variable in your cli?<br>
			Well, there's a way to do that.<br>
			Use <span class="command">&lt;&lt;EOF</span> and the command line will ask you for that!<br>
			HOW TO DO THAT?<br><br>
		</div>
		<div class="cmd1">
			<span class="h4-text">Multiline string as a shell variable:</span><br>
			<div class="code">
				$ sql=$(cat &lt;&lt;EOF<br>
				<div class="tab1">
					> SELECT foo, bar from db<br>
					> WHERE foo='baz'<br>
					> EOF<br>
					> )
				</div>
			</div><br>
			$sql will contain the whole query as a text
		</div><br>
		<div class="cmd2">
			<span class="h4-text">Pass multi-line string to a file with redirection</span><br>
			<div class="code">
				$ cat &lt;&lt;EOF > print.sh<br>
				<div class="tab1">
					> #!/bin/bash<br>
					> echo \$PWD<br>
					> echo $PWD<br>
					> EOF<br>
				</div>
			</div><br>
			The file print.sh will contain whatever is written in the multiline lines
		</div>
		<div class="cmd3">
			<span class="h4-text">Pass multi-line string to pipe in bash - content after line is sent to cat</span><br>
			<div class="code">
				cat &lt;&lt;EOF | grep 'b' | tee b.txt<br>
				<div class="tab1">
					> foo<br>
					> bab<br>
					> hyu<br>
					> jabar<br>
				</div>
			</div><br>
			Of the lines written to the multiline string, only the line that<br> have b in them will be printed to the file b.txt and to the screen, with tee command
		</div>
	</div>
</div>
<hr><hr>

<div class="trick">
	<div class="explanation">
		<span class="date">25.06.2022 - 12:40 - Saturday</span>
		<h4 class="header">Commit message as a parameter</h4>
		If you have a file that you change frequently, or you got to a situation where you need to change a specific file multiple times<br>
		<span class="command">read -p "message: " message;git add &lt;file_name&gt;; git commit -m "$message"; git push</span><br>
		You will be asked for the commit message when you press enter, and the file will be added and commited, each time with the message you want.<br>
	</div><br>
	You can take this type of read command at the start of any command you want and it will make a lot of commands much faster.<br>
	You can also use it as an alias, which also makes things easier.<br>
</div>
<hr><hr>
<div class="trick">
	<div class="explanation">
		<span class="date">29.05.2022 - 16:37 - Sunday</span><br>
		<h4 class="header">Find needed jars within your local maven repo</h4>
		When I wanted to create a jar (the process described in <a href=""https://amiriry.github.io/blogsAndArticles/create_jar_with_intellij.html"">this</a> blogpost), I had to find classes from jars in in the local repository of maven - <span class="command">$HOME/.m2/repository</span><br>
		I would get an error like this:<br>
		<div class="command">	
			{<br>
			  "errorMessage": "Error loading class application.package.StreamLambdaHandler: org/springframework/web/SpringBootServletInitializer",<br>
			  "errorType": "java.lang.NoClassDefFoundError"<br>
			}<br>
		</div><br>
		So I had to find where the class is defined. <br>
		It is defined in jars, but I had to find the right jar inside the local maven repo to extract in the new jar(like one of the options in the blogpost above).<br>
	The way I've done that is getting inside the local repo <span class="command">cd $HOME/.m2/repository</span> and do the command:<br>
	<span class="command">for j in $(find . -iname "*.jar");do if [[ $(jar tf $j | grep &lt;class_name>) ]];then echo $j;fi;done&nbsp;</span><br>
	To sum it up: Look inside all jars and grep the class name you need. Print it only when you find it.
	</div><br>
	Do this for each class you can't find definition too (which exist in the local repo of course, if not download it, the way to do it is also mentioned in the post).<br>
	You can put all the classes needed in one <span class="command">for</span> command and find all the jars needed, and use the artifact file to put them all as extracted jars.<br><br>
	And you're done.
	<br><br>
</div>
<hr><hr><hr>
<div class="trick">
	<div class="explanation">
		<span class="date">20.05.2022 - 14:45 - Friday</span><br>
		<h4 class="header">Good usage to cp2clip and zxclipboard together</h4>
		This short post will explain how to put multiple strings into the python clipboard from the post <a href="https://amiriry.github.io/blogsAndArticles/easy-to-use-clipboard.html">Python Clipboard</a>  in one commad.<br>
		To undertstand fully what is going on here, first read it, and also <a href="https://amiriry.github.io/blogsAndArticles/for-loop-cmds.html">For loop</a> post if you can.<br>
		Now you should understand how this command insert mutliple values in to the clipboard, that can be used later:<br>
		<span class="command">>> for n in $(&lt;command-to-get-names-each-in-separate-line>);do echo $n | cp2clip;echo $n;read -p "key: " reg;zxclipboard save $reg;done</span><br><br>
		This will go over the output line by line (The reason for having the names separated by newline character), show you what you are going to save, and asks you for a key to save it in.<br>
	</div>
	In the end of the process, you can use <span class="command">>> zxclipboard list</span> to see that all the names are inside the clipboard.
	<br><br>
</div>
<hr><hr><hr>
<div class="trick">
	<div class="explanation">
		<span class="date">19.05.2022 - 16:09 - Thursday</span><br>
		<h4 class="header">Reclick - refresh without doing anything, or even notice</h4>
		Did you ever had to refresh the screen multiple times to see the result? 
		For example when you started a machine in the cloud and wanted to get to "working" state, but you had to press refresh time and time again.<br>
		Each time you have to take the cursor from where you are to the place where the refresh is and come back to where you were before.<br>
		In addition, you had to change context multiple times.<br>
		There's a script you can use to do that <a href="https://raw.githubusercontent.com/amiriry/Linux/main/scripts/reclick.sh" target="_blank">here</a><br>
		First of all install xdotool <span class="command">>> apt install xdotool</span>
	</div>
	<span class="command">>> read -r cx cy < <(xdotool getmouselocation | awk -F'[ :]' '{print $2 , $4}')</span> - Read from mouslocation, current x and y. This command reads first two variables that comes from the command in the parentheses.<br>
	<span class="reclick-secondline">Then you are asked to move to the location in the screen where you want to click multiple times</span><br>
	<span class="command">>> read -r gx gy < <(xdotool getmouselocation | awk -F'[ :]' '{print $2 , $4}')</span> - Take the coordinates where you want to go<br>
	<span class="command">>> xdotool mousemove $cx $cy</span> - Move to where the script was started - current place<br>
	Then you are asked for the delay between clicks.<br>
	In the end, a while loop that take saves your current place, as above, and moves back and forth between your current place and the goto place in intermission of the time you mentioned for delay.
	<br><br>
</div>
<hr><hr><hr>
<div class="trick">
	<div class="explanation">
		<span class="date">14.05.2022 - 19:50 - Saturday</span><br>
		<h4 class="header">Copy from cli output straight to clipboard</h4>
		When you work with linux, a lot of times you have to copy someoutput to use it somewhere else. Not just redirecting, woe piping which is easy, but take the output and put it in some other application.<br>
		Most of the time you have to do it by hand, and it might get exhuasting if you have to copy a lot of text to some mail or other GUI application.<br>
		The solution: Create an alias that uses a command that knows how to work with clipboard, that takes the output from the command and put it in clipboard automatically.<br>
		The command is <span class="command">xclip</span>.<br>
		There are 2 options for the alias, one with new line copied and one without(The output have new-line character in the end):<br>
	</div>
	<div class="command">
		>> alias cp2clip='xclip -selection clipboard'<br>
		>> alias cp2clip-nonl="tr -d '\n' | xclip -selection clipboard"<br>
	</div>
	Now it can be used piped to some other command to get its output to the clipboard:
	<div class="command">
		>> echo "some thing to copy to blipboard" | cp2clip
	</div>
	Now you can use <span class="ctrl-key">ctrl+v</span> to paste it wherever you want
	<br><br>
</div>
<hr><hr><hr>
<div class="trick">
	<div class="explanation">
		<span class="date">14.05.2022 - 19:37 - Saturday</span>
		<h4 class="header">Using '#' to remember a command</h4>
		When you start writing a command and in the middle of it you realize that you need something from other command, som output.<br>
		What I used to do is to do <span class="ctrl-key">ctrl+c</span> and do the other command I need, and then start writing the command again.<br>
		This can get very frustrating if you wrote a very long command<br>
		Solution: Go to the begining of the line with <span class="ctrl-key">ctrl+a</span> and put '#'. Press enter and you have the command saved in your history to use whenever you want.
	</div><br>
	For example, in the middle of this command you realized you need some other security group with some id <num>:
	<div class="command">
		>> aws ec2 create-security-group --group-name my-sg --description "My security group"
	</div>
	So you do <span class="ctrl-key">ctrl+a</span> then '#' and then Enter:
	<div class="command">
		>> #aws ec2 create-security-group --group-name my-sg --description "My security group"<br>
		>>
	</div>
	Search for the group you need:
	<div class="command">
		>> aws ec2 describe-security-groups --query "SecurityGroups[*].{Name:GroupName,ID:GroupId}" | grep &lt;num>
	</div>
	Then you go just one command up in history and can fill in the blank
	<br><br>
<hr>
	
</div>


<div class="back blogs"><a href="index.html"><i class="fa-solid fa-house"></i></a></div>
</body>
