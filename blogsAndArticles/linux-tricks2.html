<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Linux Tricks 2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="../styles/post.css">
  <link rel="stylesheet" href="../styles/linuxtricks.css">
  <link rel="icon" href="../img/only-my-face.png">

<div class="header-container">
	<div class="header-container article-header"><h2>Linux Tricks 2</h2></div>
	<div class="header-container back blogs back-header"><a href="../index.html"><i class="fa-solid fa-house"></i></a></div>
</div>
</head>
<body>

<p>
<h4>What can be done very easy in linux?</h4>
<p>
Some stuff that I encounter that everyone should know<br>
<h6>The older ones are here <a href="linux-tricks.html">old tricks</a></h6>
<hr>
<hr><hr>
<div class="trick">
	<span class="date">29.01.2023 - 17:32 - Sunday</span>
	<h4 class="header">Aggregate files in one file and separate them when needed</h4>
	I had a situation where I had a pod that was deleted pertty fast, and I had to take files from it <br>
	and copy directory didn't work for some reason :( <br>
	So as always, <span class="names1">for loop</span> came to the rescue!.<br><br>
	<div class="command">
		>> for f in $(ls);do echo "$f:" >> aggregated;cat $f >> aggregated;echo endoffile>> aggregated;done
	</div>
	Here I am going over all the files in the directory, and print them to a file with a specific separator "endoffile".<br>
	This can obviously be whatever you want.<br>
	I copied the file to my computer (at least I could do that...)<br>
	And then I separated all the files into multiple files(myfiles where html, use whatever regular expression that meets your needs):<br>
	<div class="command">for f in $(egrep -Ris "\.html:" aggregated;do cat aggregated | sed -n "/$f:/,/endoffile/ p" | head -n -1 > $f;done )</div>
	If I write the needed commands before the pod is up, I just copy them and I don't need <br>
	more than a second or 2 to get all the files that were in the directory.<br>
	You can use that in any situtation that you need to copy a lot of files very fast<br><br>
</div>
<hr><hr>
<div class="trick">
	<span class="date">03.01.2023 - 17:32 - Tuesday</span>
	<h4 class="header">Open multiple terminals and do a command on each</h4>
	Very easy to do if you track my tricks, but still something that I needed to do once to see that it works.<br>
	<div class="command">for i in $(seq 1 5);do gnome-terminal -- /bin/bash -c 'echo aaaa;read';done</div><br>
<hr><hr>
</div>
<div class="trick">
	<span class="date">02.01.2023 - 17:32 - Monday</span>
	<h4 class="header">Take from output line by number and more lines by text</h4>
	Did you ever got to a situation where you wanted to do grep to two lines, but one of them is by its numebr?<br>
	In my case I wanted to have the output of <span class="command">kubectl get pods</span>  with grep on some name, and have the headers too.<br>
	After a bit of struggeling I got to this command:<br>
	<div class="command">kubectl get deploy | awk 'NR==1 || /some_pod_name/'</div>
	In this case, you will get the first line, that contains the headers, and the pods that contains the name you put inside '//'.<br>
	Now think about how much complicated it can get....<br>
	You can learn all about it in the blog post on awk.<br>
<hr><hr>
</div>
<div class="trick">
	<span class="date">28.12.2022 - 15:06 - Wednesday</span>
	<h4 class="header">Find lines that contains a string and comes after another line</h4>
	This was a bit complicated explanation<br>
	What do I mean?<br>
	I had a situation where I needed to find files with certain names that contains a line that comes after another line!<br>
	And more clearly:<br>
	<span class="command">for f in $(find . -iname &lt;name> -type f);do echo $f:;sed -n '/<regexp1>/,$ p' $f | grep -i &lt;regexp2>;done</span><br>
	&bull;  Find specific files.<br>
	&bull;  In it print from a specific regular expression to the end<br>
	&bull;  Then find the line of the second regular expression - here we implement the part 'only after another line'<br>
	&bull;  And in the end, it shows only the files that contain this pattern.
<hr><hr>
</div>
<hr><hr>
</div>
<div class="trick">
	<span class="date">13.10.2022 - 15:06 - Thursday</span>
	<h4 class="header">Input multiple variables in one command</h4>
	This one came to me when creating my own alarm clock. I wanted to separate hours, minutes and seconds from the same line read from input file.<br>
	The time look like this:<br>
	<span class="command">17:25:06</span><br>
	So I had to find a way to separate the fields and take them one by one as arguments.<br>
	They command to do that:<br>
	<span class="command">read -r year month day &lt; &lt;(date "+%Y:%m:%d" | awk -F':' '{print $1, $2, $3}')</span><br>
	This will give you 3 parameters with corresponding values for year, month and day.<br>
	You can of course use it for any command you want.<br>
<hr><hr>
</div>
<div class="trick">
	<span class="date">13.10.2022 - 17:54 - Thursday</span>
	<h4 class="header">Backup a file in interval you want - for regular backups while working</h4>
	Did you ever got to a situation where you needed to backup a file a lot of times once in few seconds/minutes?<br>
	Who have the time or the power to run <span class="command">cp &lt;file>&lt;id></span> each time? <span class="tab1">(&lt;id> for some identification of this specific backup)</span><br>
	You have to remember to do that and to find the easiest way to indentify the backup. The basic way is time.<br>
	So lets do it multiple times, and become a backup master! who only knows how to do one command  :(<br>
	Instead, you can do this trick:<br>
	<span class="command">while true;do cp <file> backups/&lt;file>$(date "+%H%M%S");sleep 60;done</span><br>
	This command will keep creating backups with an interval you choose (in this case 60 seconds), and the most useful thing: its identification will be with the time it is created.<br>
	You can open new terminal with this command, open new pane in tmux (or any other terminal manager), or put it in the background with '&' in the end of the command.<br>
	<span class="h4-text">Such low effort for doing something very useful.</span><br><br>
<hr><hr>
</div>
<div class="back blogs"><a href="../index.html"><i class="fa-solid fa-house"></i></a></div>
I have so many tricks...<br>
The older ones are here <a href="linux-tricks.html">old tricks</a>
</body>
